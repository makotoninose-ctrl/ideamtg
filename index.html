<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            background-attachment: fixed;
            min-height: 100vh;
            padding: 10px;
            color: #2c3e50;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(200, 200, 200, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            color: #1a1a1a;
            margin-bottom: 40px;
            padding: 30px 0;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 12px;
            word-wrap: break-word;
            letter-spacing: -0.02em;
            color: #1a1a1a;
            background: linear-gradient(135deg, #1a1a1a 0%, #4a5568 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #64748b;
            padding: 0 10px;
            font-weight: 400;
            letter-spacing: 0.01em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px 5px;
            }

            header {
                margin-bottom: 20px;
            }

            h1 {
                font-size: 1.8rem;
                margin-bottom: 8px;
            }

            .subtitle {
                font-size: 0.95rem;
            }

            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .login-form-section > div {
                grid-template-columns: 1fr !important;
                gap: 20px;
            }
            
            .user-info {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
                gap: 10px;
            }

            .user-info span {
                font-size: 0.9rem;
            }

            .card {
                padding: 20px;
                border-radius: 15px;
            }

            .card h2 {
                font-size: 1.3rem;
                margin-bottom: 15px;
            }

            .counter-section {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-bottom: 20px;
            }

            .counter-card {
                padding: 20px 15px;
            }

            .counter-icon {
                width: 50px;
                height: 50px;
                margin-bottom: 10px;
            }

            .counter-value {
                font-size: 1.5rem;
            }

            .counter-label {
                font-size: 0.8rem;
            }

            .prompt-box {
                padding: 20px;
                font-size: 1rem;
                min-height: 120px;
            }

            .btn {
                padding: 12px 20px;
                font-size: 0.95rem;
                min-height: 44px;
            }

            input, textarea, select {
                padding: 12px;
                font-size: 16px;
                min-height: 44px;
                -webkit-appearance: none;
                appearance: none;
            }

            textarea {
                min-height: 100px;
            }

            .password-toggle-btn {
                min-width: 44px;
                min-height: 44px;
            }

            .filter-section {
                gap: 8px;
                margin-bottom: 15px;
            }

            .filter-btn {
                padding: 8px 15px;
                font-size: 0.85rem;
                min-height: 36px;
            }

            .idea-item {
                padding: 15px;
            }

            .idea-title {
                font-size: 1.1rem;
            }

            .idea-header {
                flex-wrap: wrap;
                gap: 10px;
            }

            .idea-actions {
                flex-wrap: wrap;
                gap: 8px;
            }

            .like-btn {
                padding: 5px 10px;
                font-size: 0.8rem;
            }

            .comment-btn {
                padding: 5px 10px;
                font-size: 0.8rem;
            }

            .comment-section {
                margin-top: 12px;
                padding-top: 12px;
            }

            .comment-form {
                padding: 12px;
            }

            .comment-item {
                padding: 10px;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-state-icon {
                width: 60px;
                height: 60px;
            }

            .chat-container {
                height: 500px;
            }

            .chat-messages {
                padding: 15px;
            }

            .chat-content {
                max-width: 85%;
            }

            .chat-input-container {
                flex-direction: column;
                gap: 12px;
            }

            .chat-input-wrapper {
                width: 100%;
            }

            .chat-send-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 8px 5px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .subtitle {
                font-size: 0.85rem;
            }

            .counter-section {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .card {
                padding: 15px;
            }

            .card h2 {
                font-size: 1.2rem;
            }

            .prompt-box {
                padding: 15px;
                font-size: 0.95rem;
                min-height: 100px;
            }

            .counter-card {
                padding: 15px;
            }

            .counter-icon {
                width: 45px;
                height: 45px;
            }

            .counter-value {
                font-size: 1.3rem;
            }

            .form-group {
                margin-bottom: 15px;
            }

            label {
                font-size: 0.9rem;
                margin-bottom: 6px;
            }

            h3 {
                font-size: 1.1rem;
            }

            .news-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .news-filters {
                gap: 8px;
            }

            .news-filter-btn {
                padding: 8px 15px;
                font-size: 0.85rem;
            }

            .news-image {
                height: 160px;
            }

            .news-content {
                padding: 15px;
            }

            .news-title {
                font-size: 1rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            footer {
                margin-top: 40px;
                padding: 30px 0;
            }

            .modal-content {
                width: 95%;
                max-height: 90vh;
                margin: 2% auto;
            }

            .modal-header,
            .modal-body {
                padding: 20px;
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 32px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.08),
                0 1px 3px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card:hover {
            box-shadow: 
                0 8px 30px rgba(0, 0, 0, 0.12),
                0 2px 6px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
        }

        .card h2 {
            color: #1a1a1a;
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: -0.01em;
            margin-bottom: 24px;
        }

        .prompt-section {
            position: relative;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 600px;
            max-height: 70vh;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .chat-message {
            display: flex;
            gap: 12px;
            animation: fadeIn 0.3s ease;
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .chat-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .chat-message.user .chat-avatar {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            color: white;
        }

        .chat-message.assistant .chat-avatar {
            background: linear-gradient(135deg, #4a5568 0%, #64748b 100%);
            color: white;
        }

        .chat-content {
            flex: 1;
            max-width: 75%;
        }

        .chat-message.user .chat-content {
            text-align: right;
        }

        .chat-bubble {
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.6;
            word-wrap: break-word;
            display: inline-block;
        }

        .chat-message.user .chat-bubble {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .chat-message.assistant .chat-bubble {
            background: rgba(255, 255, 255, 0.95);
            color: #1a1a1a;
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .chat-input-container {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input-wrapper {
            flex: 1;
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: 12px 16px;
            padding-right: 50px;
            border: 1.5px solid #e2e8f0;
            border-radius: 12px;
            font-size: 0.95rem;
            font-family: inherit;
            resize: none;
            min-height: 50px;
            max-height: 120px;
            background: #ffffff;
            color: #2c3e50;
            transition: all 0.3s;
        }

        .chat-input:focus {
            outline: none;
            border-color: #4a5568;
            box-shadow: 0 0 0 3px rgba(74, 85, 104, 0.1);
        }

        .chat-send-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s;
            white-space: nowrap;
            min-height: 50px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .chat-send-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .chat-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .chat-api-config {
            background: rgba(255, 243, 205, 0.5);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .chat-api-config h4 {
            margin: 0 0 8px 0;
            color: #856404;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .chat-api-config p {
            margin: 0 0 10px 0;
            color: #856404;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .chat-api-config input {
            width: 100%;
            padding: 10px;
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .chat-api-config button {
            padding: 8px 16px;
            background: rgba(255, 193, 7, 0.3);
            color: #856404;
            border: 1px solid rgba(255, 193, 7, 0.5);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .chat-loading {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
        }

        .chat-loading span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #94a3b8;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .chat-loading span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .chat-loading span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        .chat-empty {
            text-align: center;
            padding: 40px 20px;
            color: #94a3b8;
        }

        .chat-empty-icon {
            font-size: 3rem;
            margin-bottom: 12px;
            opacity: 0.5;
        }

        .clear-chat-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.9);
            border: 1.5px solid #e2e8f0;
            color: #64748b;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .clear-chat-btn:hover {
            background: #ffffff;
            border-color: #cbd5e0;
            color: #1a1a1a;
        }

        .prompt-box {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #2c3e50;
            padding: 32px;
            border-radius: 12px;
            margin-bottom: 20px;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.15rem;
            line-height: 1.7;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.06),
                0 1px 2px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.06);
            font-weight: 400;
            letter-spacing: 0.01em;
        }

        .btn {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            font-weight: 600;
            letter-spacing: 0.02em;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.15),
                0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 20px rgba(0, 0, 0, 0.2),
                0 3px 6px rgba(0, 0, 0, 0.15);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.15),
                0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1a1a1a;
            font-size: 0.9rem;
            letter-spacing: 0.01em;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px 16px;
            background: #ffffff;
            border: 1.5px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.95rem;
            font-family: inherit;
            color: #2c3e50;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4a5568;
            box-shadow: 0 0 0 3px rgba(74, 85, 104, 0.1);
            background: #ffffff;
        }

        input::placeholder, textarea::placeholder {
            color: #94a3b8;
        }

        /* „Çπ„Éû„Éº„Éà„Éï„Ç©„É≥„ÅßÂÖ•ÂäõÊôÇ„ÅÆ„Ç∫„Éº„É†„ÇíÈò≤„Åê */
        @media screen and (max-width: 768px) {
            input[type="email"],
            input[type="text"],
            input[type="password"],
            textarea,
            select {
                font-size: 16px !important;
            }
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        .ideas-list {
            grid-column: 1 / -1;
        }

        .idea-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 16px;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.06),
                0 1px 3px rgba(0, 0, 0, 0.04);
            border: 1px solid rgba(0, 0, 0, 0.06);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .idea-item:hover {
            transform: translateX(4px);
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.1),
                0 2px 6px rgba(0, 0, 0, 0.06);
            background: rgba(255, 255, 255, 0.95);
        }

        .idea-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .idea-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1a1a1a;
            letter-spacing: -0.01em;
        }

        .idea-category {
            background: linear-gradient(135deg, #1a1a1a 0%, #4a5568 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            white-space: nowrap;
            font-weight: 600;
            letter-spacing: 0.02em;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .idea-description {
            color: #64748b;
            line-height: 1.7;
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .idea-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #94a3b8;
            padding-top: 12px;
            border-top: 1px solid #f1f5f9;
        }

        .idea-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .like-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.9);
            border: 1.5px solid #e2e8f0;
            color: #64748b;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .like-btn:hover {
            border-color: #cbd5e0;
            background: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .like-btn.liked {
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            border-color: #ef4444;
            color: white;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.25);
        }

        .like-btn.liked:hover {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.35);
        }

        .like-icon {
            font-size: 1rem;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .like-btn.liked .like-icon {
            transform: scale(1.2);
        }

        .like-btn:active .like-icon {
            transform: scale(0.9);
        }

        .like-count {
            font-weight: 700;
            min-width: 20px;
            text-align: center;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            border: none;
            padding: 6px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(239, 68, 68, 0.3);
        }

        .comment-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.9);
            border: 1.5px solid #e2e8f0;
            color: #64748b;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .comment-btn:hover {
            border-color: #cbd5e0;
            background: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .comment-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #f1f5f9;
        }

        .comment-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #64748b;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 12px;
            transition: color 0.3s;
        }

        .comment-toggle:hover {
            color: #1a1a1a;
        }

        .comment-toggle-icon {
            transition: transform 0.3s;
        }

        .comment-toggle.active .comment-toggle-icon {
            transform: rotate(90deg);
        }

        .comment-form {
            margin-bottom: 16px;
            padding: 16px;
            background: rgba(248, 249, 250, 0.8);
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .comment-form textarea {
            width: 100%;
            padding: 12px;
            border: 1.5px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
            background: #ffffff;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .comment-form textarea:focus {
            outline: none;
            border-color: #4a5568;
            box-shadow: 0 0 0 3px rgba(74, 85, 104, 0.1);
        }

        .comment-form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .comment-submit-btn {
            padding: 8px 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .comment-submit-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .comment-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .comment-cancel-btn {
            padding: 8px 20px;
            background: rgba(255, 255, 255, 0.9);
            border: 1.5px solid #e2e8f0;
            color: #64748b;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .comment-cancel-btn:hover {
            background: #ffffff;
            border-color: #cbd5e0;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .comment-item {
            padding: 12px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .comment-author {
            font-weight: 700;
            color: #1a1a1a;
            font-size: 0.9rem;
        }

        .comment-date {
            font-size: 0.75rem;
            color: #94a3b8;
        }

        .comment-content {
            color: #64748b;
            line-height: 1.6;
            font-size: 0.9rem;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .comment-empty {
            text-align: center;
            padding: 20px;
            color: #94a3b8;
            font-size: 0.85rem;
        }

        .filter-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.9);
            border: 1.5px solid #e2e8f0;
            color: #4a5568;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.01em;
        }

        .filter-btn:hover {
            border-color: #cbd5e0;
            background: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d3748 100%);
            color: white;
            border-color: #1a1a1a;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.5;
        }

        .empty-state-icon svg {
            width: 100%;
            height: 100%;
            fill: #999;
        }

        .user-info {
            position: absolute;
            top: 20px;
            right: 20px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 10px 20px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .user-info span {
            color: #1a1a1a;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .user-info .btn-small {
            padding: 8px 18px;
            font-size: 0.85rem;
            width: auto;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        header {
            position: relative;
        }

        .password-toggle {
            position: relative;
        }

        .password-toggle-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 0.9rem;
            padding: 5px;
        }

        .password-toggle-btn:hover {
            color: #667eea;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.85rem;
            margin-top: 6px;
            display: block;
            font-weight: 500;
        }

        .success-message {
            color: #10b981;
            font-size: 0.85rem;
            margin-top: 6px;
            display: block;
            font-weight: 500;
        }

        .login-form-section {
            margin-bottom: 30px;
        }

        .counter-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .counter-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 12px;
            padding: 28px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.08),
                0 1px 3px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .counter-card:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 8px 30px rgba(0, 0, 0, 0.12),
                0 2px 6px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }

        .counter-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .counter-icon svg {
            width: 100%;
            height: 100%;
            transition: transform 0.3s ease;
        }

        .counter-card:hover .counter-icon svg {
            transform: scale(1.1) rotate(5deg);
        }

        .counter-card.ideas .counter-icon svg {
            fill: #1a1a1a;
        }

        .counter-card.users .counter-icon svg {
            fill: #4a5568;
        }

        .counter-card.today .counter-icon svg {
            fill: #64748b;
        }

        .counter-card.categories .counter-icon svg {
            fill: #718096;
        }

        .counter-value {
            font-size: 2.25rem;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 6px;
            letter-spacing: -0.02em;
        }

        .counter-label {
            font-size: 0.85rem;
            color: #64748b;
            font-weight: 600;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        .counter-card.ideas {
            border-top: 3px solid #1a1a1a;
        }

        .counter-card.users {
            border-top: 3px solid #4a5568;
        }

        .counter-card.today {
            border-top: 3px solid #64748b;
        }

        .counter-card.categories {
            border-top: 3px solid #718096;
        }


        footer {
            margin-top: 60px;
            padding: 40px 0;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 40px;
        }

        .footer-section h3 {
            font-size: 1rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 16px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        .footer-section p,
        .footer-section li {
            font-size: 0.9rem;
            color: #64748b;
            line-height: 1.8;
            margin-bottom: 8px;
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section a {
            color: #4a5568;
            text-decoration: none;
            transition: color 0.3s;
            cursor: pointer;
        }

        .footer-section a:hover {
            color: #1a1a1a;
            text-decoration: underline;
        }

        .footer-bottom {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
            text-align: center;
            color: #94a3b8;
            font-size: 0.85rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            margin: 5% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 700px;
            max-height: 80vh;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.3),
                0 8px 24px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.8);
            animation: slideDown 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 24px 32px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a1a1a;
            letter-spacing: -0.01em;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            color: #94a3b8;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: rgba(0, 0, 0, 0.05);
            color: #1a1a1a;
        }

        .modal-body {
            padding: 32px;
            overflow-y: auto;
            flex: 1;
        }

        .modal-body h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1a1a1a;
            margin-top: 24px;
            margin-bottom: 12px;
        }

        .modal-body h3:first-child {
            margin-top: 0;
        }

        .modal-body p,
        .modal-body li {
            font-size: 0.95rem;
            color: #64748b;
            line-height: 1.8;
            margin-bottom: 12px;
        }

        .modal-body ul {
            margin-left: 20px;
            margin-bottom: 16px;
        }

        .modal-body li {
            margin-bottom: 8px;
        }

        .contact-info {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 8px;
        }

        .contact-info p {
            margin-bottom: 8px;
        }

        .contact-info strong {
            color: #1a1a1a;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="user-info" id="userInfo" style="display: none;">
                <span>„Çà„ÅÜ„Åì„Åù„ÄÅ<span id="userName"></span>„Åï„Çì</span>
                <button class="btn btn-small" onclick="logout()">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>
            <h1>ÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞</h1>
            <p class="subtitle">ÂâµÈÄ†ÁöÑ„Å™Ë≥™Âïè„Åã„ÇâÊñ∞„Åó„ÅÑ„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„ÇíÁîü„ÅøÂá∫„Åù„ÅÜ</p>
        </header>

        <!-- „Ç´„Ç¶„É≥„Çø„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="counter-section" id="counterSection">
            <div class="counter-card ideas">
                <div class="counter-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"/>
                    </svg>
                </div>
                <div class="counter-value" id="totalIdeas">0</div>
                <div class="counter-label">Á∑è„Ç¢„Ç§„Éá„Ç¢Êï∞</div>
            </div>
            <div class="counter-card users">
                <div class="counter-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                </div>
                <div class="counter-value" id="totalUsers">0</div>
                <div class="counter-label">ÁôªÈå≤„É¶„Éº„Ç∂„ÉºÊï∞</div>
            </div>
            <div class="counter-card today">
                <div class="counter-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                    </svg>
                </div>
                <div class="counter-value" id="todayIdeas">0</div>
                <div class="counter-label">‰ªäÊó•„ÅÆ„Ç¢„Ç§„Éá„Ç¢</div>
            </div>
            <div class="counter-card categories">
                <div class="counter-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7.01v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16zM16 17H5V7h11l3.55 5L16 17z"/>
                    </svg>
                </div>
                <div class="counter-value" id="totalCategories">0</div>
                <div class="counter-label">„Ç´„ÉÜ„Ç¥„É™Êï∞</div>
            </div>
        </div>

        <!-- ‰ºöÂì°ÁôªÈå≤„Éª„É≠„Ç∞„Ç§„É≥„Éï„Ç©„Éº„É† -->
        <div class="card login-form-section" id="authSection">
            <h2 style="margin-bottom: 20px;">üë§ ‰ºöÂì°ÁôªÈå≤„Éª„É≠„Ç∞„Ç§„É≥</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                <!-- ‰ºöÂì°ÁôªÈå≤„Éï„Ç©„Éº„É† -->
                <div>
                    <h3 style="margin-bottom: 15px; color: #1a1a1a; font-weight: 700;">Êñ∞Ë¶è‰ºöÂì°ÁôªÈå≤</h3>
                    <form id="registerForm">
                        <div class="form-group">
                            <label for="registerNickname">„Éã„ÉÉ„ÇØ„Éç„Éº„É† *</label>
                            <input type="text" id="registerNickname" required placeholder="‰æã: „Ç¢„Ç§„Éá„Ç¢„Éû„Çπ„Çø„Éº">
                            <span class="error-message" id="registerNicknameError"></span>
                        </div>
                        <div class="form-group password-toggle">
                            <label for="registerPassword">„Éë„Çπ„ÉØ„Éº„Éâ *</label>
                            <input type="password" id="registerPassword" required placeholder="8ÊñáÂ≠ó‰ª•‰∏ä">
                            <button type="button" class="password-toggle-btn" onclick="togglePassword('registerPassword', this)">Ë°®Á§∫</button>
                            <span class="error-message" id="registerPasswordError"></span>
                        </div>
                        <button type="submit" class="btn">‰ºöÂì°ÁôªÈå≤</button>
                        <span class="success-message" id="registerSuccess" style="display: none;"></span>
                    </form>
                </div>

                <!-- „É≠„Ç∞„Ç§„É≥„Éï„Ç©„Éº„É† -->
                <div>
                    <h3 style="margin-bottom: 15px; color: #1a1a1a; font-weight: 700;">„É≠„Ç∞„Ç§„É≥</h3>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginNickname">„Éã„ÉÉ„ÇØ„Éç„Éº„É† *</label>
                            <input type="text" id="loginNickname" required placeholder="„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÇíÂÖ•Âäõ">
                            <span class="error-message" id="loginNicknameError"></span>
                        </div>
                        <div class="form-group password-toggle">
                            <label for="loginPassword">„Éë„Çπ„ÉØ„Éº„Éâ *</label>
                            <input type="password" id="loginPassword" required placeholder="„Éë„Çπ„ÉØ„Éº„Éâ">
                            <button type="button" class="password-toggle-btn" onclick="togglePassword('loginPassword', this)">Ë°®Á§∫</button>
                            <span class="error-message" id="loginPasswordError"></span>
                        </div>
                        <button type="submit" class="btn btn-secondary">„É≠„Ç∞„Ç§„É≥</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="card prompt-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin-bottom: 0;">ü§ñ ChatGPT „Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞</h2>
                    <button class="clear-chat-btn" onclick="clearChat()">‰ºöË©±„Çí„ÇØ„É™„Ç¢</button>
                </div>

                <div class="chat-api-config" id="chatApiConfig">
                    <h4>üîë OpenAI API„Ç≠„Éº„ÅÆË®≠ÂÆö</h4>
                    <p>ChatGPT„Å®ÂØæË©±„Åô„Çã„Å´„ÅØ„ÄÅOpenAI API„Ç≠„Éº„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ</p>
                    <p><a href="https://platform.openai.com/api-keys" target="_blank" style="color: #856404;">https://platform.openai.com/api-keys</a> „ÅßAPI„Ç≠„Éº„ÇíÂèñÂæó„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                    <input type="text" id="openaiApiKey" placeholder="sk-..." style="font-family: monospace;">
                    <button onclick="saveOpenAIApiKey()">API„Ç≠„Éº„Çí‰øùÂ≠ò</button>
                </div>

                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-empty">
                            <div class="chat-empty-icon">üí¨</div>
                            <p>ChatGPT„Å®ÂØæË©±„Åó„Å¶„ÄÅ„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„Çí„Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞„Åó„Åæ„Åó„Çá„ÅÜÔºÅ</p>
                            <p style="font-size: 0.85rem; margin-top: 8px;">‰æã: „ÄåÊñ∞Ë¶è‰∫ãÊ•≠„ÅÆ„Ç¢„Ç§„Éá„Ç¢„Çí3„Å§Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ„Äç</p>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <textarea 
                                id="chatInput" 
                                class="chat-input" 
                                placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."
                                rows="1"
                                onkeydown="handleChatKeyDown(event)"
                            ></textarea>
                        </div>
                        <button class="chat-send-btn" id="chatSendBtn" onclick="sendChatMessage()">
                            ÈÄÅ‰ø°
                        </button>
                    </div>
                </div>
            </div>

            <div class="card" id="ideaFormSection" style="display: none;">
                <h2 style="margin-bottom: 20px;">üìù „Ç¢„Ç§„Éá„Ç¢„ÇíË®òÈå≤</h2>
                <form id="ideaForm">
                    <div class="form-group">
                        <label for="ideaTitle">„Ç¢„Ç§„Éá„Ç¢„ÅÆ„Çø„Ç§„Éà„É´ *</label>
                        <input type="text" id="ideaTitle" required placeholder="‰æã: AI„Çí‰Ωø„Å£„ÅüÂÅ•Â∫∑ÁÆ°ÁêÜ„Ç¢„Éó„É™">
                    </div>
                    <div class="form-group">
                        <label for="ideaCategory">„Ç´„ÉÜ„Ç¥„É™ *</label>
                        <select id="ideaCategory" required>
                            <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <option value="„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº">„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº</option>
                            <option value="„Éò„É´„Çπ„Ç±„Ç¢">„Éò„É´„Çπ„Ç±„Ç¢</option>
                            <option value="ÊïôËÇ≤">ÊïôËÇ≤</option>
                            <option value="„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É≥„É°„É≥„Éà">„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É≥„É°„É≥„Éà</option>
                            <option value="„Éï„Éº„ÉâÔºÜ„Éâ„É™„É≥„ÇØ">„Éï„Éº„ÉâÔºÜ„Éâ„É™„É≥„ÇØ</option>
                            <option value="„Éï„Ç°„ÉÉ„Ç∑„Éß„É≥">„Éï„Ç°„ÉÉ„Ç∑„Éß„É≥</option>
                            <option value="Áí∞Â¢É„Éª„Çµ„Çπ„ÉÜ„Éä„Éì„É™„ÉÜ„Ç£">Áí∞Â¢É„Éª„Çµ„Çπ„ÉÜ„Éä„Éì„É™„ÉÜ„Ç£</option>
                            <option value="„Éï„Ç£„É≥„ÉÜ„ÉÉ„ÇØ">„Éï„Ç£„É≥„ÉÜ„ÉÉ„ÇØ</option>
                            <option value="‰∏çÂãïÁî£">‰∏çÂãïÁî£</option>
                            <option value="„Åù„ÅÆ‰ªñ">„Åù„ÅÆ‰ªñ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ideaDescription">Ë©≥Á¥∞Ë™¨Êòé *</label>
                        <textarea id="ideaDescription" required placeholder="„Ç¢„Ç§„Éá„Ç¢„ÅÆË©≥Á¥∞„ÇÑÁâπÂæ¥„ÄÅ„Çø„Éº„Ç≤„ÉÉ„ÉàÈ°ßÂÆ¢„Å™„Å©„ÇíË®òÂÖ•„Åó„Å¶„Åè„Å†„Åï„ÅÑ"></textarea>
                    </div>
                    <button type="submit" class="btn">„Ç¢„Ç§„Éá„Ç¢„Çí‰øùÂ≠ò</button>
                </form>
            </div>
        </div>

        <div class="card ideas-list">
            <h2 style="margin-bottom: 20px;">üíº ‰øùÂ≠ò„Åï„Çå„Åü„Ç¢„Ç§„Éá„Ç¢</h2>
            <div class="filter-section">
                <button class="filter-btn active" data-category="all" onclick="filterIdeas('all')">„Åô„Åπ„Å¶</button>
                <button class="filter-btn" data-category="„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº" onclick="filterIdeas('„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº')">„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº</button>
                <button class="filter-btn" data-category="„Éò„É´„Çπ„Ç±„Ç¢" onclick="filterIdeas('„Éò„É´„Çπ„Ç±„Ç¢')">„Éò„É´„Çπ„Ç±„Ç¢</button>
                <button class="filter-btn" data-category="ÊïôËÇ≤" onclick="filterIdeas('ÊïôËÇ≤')">ÊïôËÇ≤</button>
                <button class="filter-btn" data-category="„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É≥„É°„É≥„Éà" onclick="filterIdeas('„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É≥„É°„É≥„Éà')">„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„É≥„É°„É≥„Éà</button>
                <button class="filter-btn" data-category="„Åù„ÅÆ‰ªñ" onclick="filterIdeas('„Åù„ÅÆ‰ªñ')">„Åù„ÅÆ‰ªñ</button>
            </div>
            <div id="ideasContainer">
                <div class="empty-state">
                    <div class="empty-state-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"/>
                        </svg>
                    </div>
                    <p>„Åæ„Å†„Ç¢„Ç§„Éá„Ç¢„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ‰∏ä„ÅÆ„Éï„Ç©„Éº„É†„Åã„Çâ„Ç¢„Ç§„Éá„Ç¢„ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- „Éï„ÉÉ„Çø„Éº -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>ÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞„Å´„Å§„ÅÑ„Å¶</h3>
                <p>ÂâµÈÄ†ÁöÑ„Å™Ë≥™Âïè„Åã„ÇâÊñ∞„Åó„ÅÑ„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„ÇíÁîü„ÅøÂá∫„Åô„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Åß„Åô„ÄÇ„Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞Ê©üËÉΩ„Å®„Ç¢„Ç§„Éá„Ç¢ÁÆ°ÁêÜ„ÉÑ„Éº„É´„Åß„ÄÅ„ÅÇ„Å™„Åü„ÅÆ„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„ÇíÂΩ¢„Å´„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
            </div>
            <div class="footer-section">
                <h3>ÊÉÖÂ†±</h3>
                <ul>
                    <li><a onclick="openModal('privacy')">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</a></li>
                    <li><a onclick="openModal('company')">ÈÅãÂñ∂‰ºöÁ§æ</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>„Çµ„Éù„Éº„Éà</h3>
                <ul>
                    <li><a href="mailto:support@ideakaigi.com">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a></li>
                    <li><a href="#" onclick="alert('ÁèæÂú®Ê∫ñÂÇô‰∏≠„Åß„Åô'); return false;">„Çà„Åè„ÅÇ„ÇãË≥™Âïè</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 ÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞. All rights reserved.</p>
        </div>
    </footer>

    <!-- „Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„É¢„Éº„ÉÄ„É´ -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</h2>
                <button class="close-btn" onclick="closeModal('privacy')">&times;</button>
            </div>
            <div class="modal-body">
                <p>ÊúÄÁµÇÊõ¥Êñ∞Êó•: 2024Âπ¥1Êúà1Êó•</p>

                <h3>1. ÂÄã‰∫∫ÊÉÖÂ†±„ÅÆÂèéÈõÜ„Å´„Å§„ÅÑ„Å¶</h3>
                <p>ÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞Ôºà‰ª•‰∏ã„ÄåÂΩì„Çµ„Éº„Éì„Çπ„ÄçÔºâ„ÅØ„ÄÅ„Çµ„Éº„Éì„Çπ„ÅÆÊèê‰æõ„Å´ÂøÖË¶Å„Å™‰ª•‰∏ã„ÅÆÊÉÖÂ†±„ÇíÂèéÈõÜ„ÅÑ„Åü„Åó„Åæ„ÅôÔºö</p>
                <ul>
                    <li>‰ºöÂì°ÁôªÈå≤ÊôÇÔºö„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÄÅ„Éë„Çπ„ÉØ„Éº„Éâ</li>
                    <li>„Çµ„Éº„Éì„ÇπÂà©Áî®ÊôÇÔºö‰ΩúÊàê„Åï„Çå„Åü„Ç¢„Ç§„Éá„Ç¢„ÄÅ„Ç´„ÉÜ„Ç¥„É™„ÄÅ‰ΩúÊàêÊó•ÊôÇ</li>
                </ul>

                <h3>2. ÂÄã‰∫∫ÊÉÖÂ†±„ÅÆÂà©Áî®ÁõÆÁöÑ</h3>
                <p>ÂèéÈõÜ„Åó„ÅüÂÄã‰∫∫ÊÉÖÂ†±„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÁõÆÁöÑ„ÅßÂà©Áî®„ÅÑ„Åü„Åó„Åæ„ÅôÔºö</p>
                <ul>
                    <li>„Çµ„Éº„Éì„Çπ„ÅÆÊèê‰æõ„ÄÅÈÅãÂñ∂„ÄÅÊîπÂñÑ</li>
                    <li>„É¶„Éº„Ç∂„ÉºË™çË®º„Åä„Çà„Å≥„Ç¢„Ç´„Ç¶„É≥„ÉàÁÆ°ÁêÜ</li>
                    <li>„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Å∏„ÅÆÂØæÂøú</li>
                    <li>„Çµ„Éº„Éì„Çπ„Å´Èñ¢„Åô„ÇãÈÄöÁü•„ÉªÈÄ£Áµ°</li>
                </ul>

                <h3>3. ÂÄã‰∫∫ÊÉÖÂ†±„ÅÆ‰øùÁÆ°„Å®„Çª„Ç≠„É•„É™„ÉÜ„Ç£</h3>
                <p>ÂÄã‰∫∫ÊÉÖÂ†±„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅÆ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇÂΩì„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅÈÅ©Âàá„Å™„Çª„Ç≠„É•„É™„ÉÜ„Ç£ÂØæÁ≠ñ„ÇíË¨õ„Åò„Å¶„ÄÅÂÄã‰∫∫ÊÉÖÂ†±„ÅÆÊºèÊ¥©„ÄÅÊªÖÂ§±„ÄÅÊØÄÊêç„ÅÆÈò≤Ê≠¢„Å´Âä™„ÇÅ„Åæ„Åô„ÄÇ</p>

                <h3>4. ÂÄã‰∫∫ÊÉÖÂ†±„ÅÆÁ¨¨‰∏âËÄÖÊèê‰æõ</h3>
                <p>ÂΩì„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅÊ≥ï‰ª§„Å´„Çà„ÇäË™ç„ÇÅ„Çâ„Çå„ÅüÂ†¥Âêà„ÇíÈô§„Åç„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆÂêåÊÑè„Å™„ÅèÁ¨¨‰∏âËÄÖ„Å´ÂÄã‰∫∫ÊÉÖÂ†±„ÇíÊèê‰æõ„Åô„Çã„Åì„Å®„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>

                <h3>5. Cookie„Åä„Çà„Å≥„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„ÅÆÂà©Áî®</h3>
                <p>ÂΩì„Çµ„Éº„Éì„Çπ„Åß„ÅØ„ÄÅ„Çµ„Éº„Éì„Çπ„ÅÆÊ©üËÉΩÂêë‰∏ä„ÅÆ„Åü„ÇÅ„ÄÅ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„Çä„ÄÅ„É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇÑ„Ç¢„Ç§„Éá„Ç¢„Éá„Éº„Çø„Åå„Éñ„É©„Ç¶„Ç∂„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ</p>

                <h3>6. „Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„ÅÆÂ§âÊõ¥</h3>
                <p>ÂΩì„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶Êú¨„Éù„É™„Ç∑„Éº„ÇíÂ§âÊõ¥„Åô„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂ§âÊõ¥Âæå„ÅÆ„Éù„É™„Ç∑„Éº„ÅØ„ÄÅÂΩì„Çµ„Éº„Éì„Çπ‰∏ä„Å´Êé≤Ëºâ„Åó„ÅüÊôÇÁÇπ„ÅßÂäπÂäõ„ÇíÁîü„Åò„Çã„ÇÇ„ÅÆ„Å®„Åó„Åæ„Åô„ÄÇ</p>

                <h3>7. „ÅäÂïè„ÅÑÂêà„Çè„Åõ</h3>
                <p>„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„Å´Èñ¢„Åô„Çã„ÅäÂïè„ÅÑÂêà„Çè„Åõ„ÅØ„ÄÅ‰ª•‰∏ã„ÅÆÈÄ£Áµ°ÂÖà„Åæ„Åß„ÅäÈ°ò„ÅÑ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ</p>
                <div class="contact-info">
                    <p><strong>„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ:</strong> privacy@ideakaigi.com</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ÈÅãÂñ∂‰ºöÁ§æ„É¢„Éº„ÉÄ„É´ -->
    <div id="companyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ÈÅãÂñ∂‰ºöÁ§æ</h2>
                <button class="close-btn" onclick="closeModal('company')">&times;</button>
            </div>
            <div class="modal-body">
                <h3>‰ºöÁ§æÊ¶ÇË¶Å</h3>
                <div class="contact-info">
                    <p><strong>„Çµ„Éº„Éì„ÇπÂêç:</strong> ÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞</p>
                    <p><strong>ÈÅãÂñ∂‰ºöÁ§æ:</strong> Ê†™Âºè‰ºöÁ§æÁïåÈöà„Ç¢„Ç§„Éá„Ç¢‰ºöË≠∞</p>
                    <p><strong>Ë®≠Á´ãÊó•:</strong> 2024Âπ¥1Êúà1Êó•</p>
                    <p><strong>ÊâÄÂú®Âú∞:</strong> „Äí100-0001<br>Êù±‰∫¨ÈÉΩÂçÉ‰ª£Áî∞Âå∫ÂçÉ‰ª£Áî∞1-1-1</p>
                    <p><strong>‰ª£Ë°®ËÄÖ:</strong> ‰ª£Ë°®ÂèñÁ∑†ÂΩπ Â±±Áî∞ Â§™ÈÉé</p>
                </div>

                <h3>‰∫ãÊ•≠ÂÜÖÂÆπ</h3>
                <ul>
                    <li>„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢ÂâµÂá∫„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„ÅÆÈÅãÂñ∂</li>
                    <li>„Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞„ÉÑ„Éº„É´„ÅÆÊèê‰æõ</li>
                    <li>„Éì„Ç∏„Éç„ÇπÊîØÊè¥„Çµ„Éº„Éì„Çπ„ÅÆÊèê‰æõ</li>
                </ul>

                <h3>„ÅäÂïè„ÅÑÂêà„Çè„Åõ</h3>
                <div class="contact-info">
                    <p><strong>ÈõªË©±Áï™Âè∑:</strong> 03-1234-5678ÔºàÂπ≥Êó• 10:00-18:00Ôºâ</p>
                    <p><strong>„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ:</strong> info@ideakaigi.com</p>
                    <p><strong>„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Éï„Ç©„Éº„É†:</strong> <a href="mailto:info@ideakaigi.com">„Åì„Å°„Çâ„Åã„Çâ</a></p>
                </div>

                <h3>„Ç¢„ÇØ„Çª„Çπ</h3>
                <p>JRÊù±‰∫¨ÈßÖ„Çà„ÇäÂæíÊ≠©5ÂàÜ<br>Êù±‰∫¨„É°„Éà„É≠‰∏∏„ÉéÂÜÖÁ∑ö Êù±‰∫¨ÈßÖ„Çà„ÇäÂæíÊ≠©3ÂàÜ</p>
            </div>
        </div>
    </div>

    <script>
        // „Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞Áî®„ÅÆË≥™Âïè„É™„Çπ„Éà
        const prompts = [
            "Êó•Â∏∏ÁîüÊ¥ª„ÅÆ‰∏≠„ÅßÊúÄ„ÇÇ‰∏ç‰æø„Å†„Å®ÊÑü„Åò„Çã„Åì„Å®„ÅØ‰Ωï„Åß„Åô„ÅãÔºü„Åù„Çå„ÇíËß£Ê±∫„Åô„Çã„Éì„Ç∏„Éç„Çπ„ÅØÔºü",
            "10Âπ¥Âæå„ÅÆ‰∏ñÁïå„ÅßÊúÄ„ÇÇÂøÖË¶Å„Å®„Åï„Çå„Çã„Çµ„Éº„Éì„Çπ„ÅØ‰Ωï„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÅãÔºü",
            "ÊúÄËøë„ÅÆ„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„ÇíÊ¥ªÁî®„Åó„Å¶„ÄÅÂæìÊù•„ÅÆÊ•≠Áïå„ÇíÂ§âÈù©„Åß„Åç„Çã„Ç¢„Ç§„Éá„Ç¢„ÅØÔºü",
            "È´òÈΩ¢ÂåñÁ§æ‰ºö„Å´„Åä„ÅÑ„Å¶„ÄÅ„Åæ„Å†Ê∫Ä„Åü„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Éã„Éº„Ç∫„ÅØ‰Ωï„Åß„Åô„ÅãÔºü",
            "Áí∞Â¢ÉÂïèÈ°å„ÇíËß£Ê±∫„Åó„Å™„Åå„Çâ„ÄÅÂà©Áõä„ÇÇÁîü„ÅøÂá∫„Åõ„Çã„Éì„Ç∏„Éç„Çπ„É¢„Éá„É´„ÅØÔºü",
            "Ëã•ËÄÖ„ÅÆÈñì„ÅßÊµÅË°å„Å£„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Å®„ÄÅ„Åæ„Å†„Éì„Ç∏„Éç„ÇπÂåñ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„ÇÇ„ÅÆ„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ„ÅØÔºü",
            "Âú∞ÊñπÈÉΩÂ∏Ç„ÅßÊàêÂäü„Åß„Åç„Çã„ÄÅÈÉΩ‰ºö„Å´„ÅØ„Å™„ÅÑÂº∑„Åø„ÇíÊ¥ª„Åã„Åó„Åü‰∫ãÊ•≠„ÅØÔºü",
            "AI„ÇÑËá™ÂãïÂåñ„Å´„Çà„Å£„Å¶ÂÆüÁèæÂèØËÉΩ„Å´„Å™„Å£„ÅüÊñ∞„Åó„ÅÑ„Çµ„Éº„Éì„Çπ„ÅØÔºü",
            "„ÅÇ„Å™„Åü„ÅÆÂ∞ÇÈñÄÁü•Ë≠ò„ÇÑÁµåÈ®ì„ÇíÊ¥ª„Åã„Åó„Å¶„ÄÅ„Å©„Çì„Å™‰æ°ÂÄ§„ÇíÊèê‰æõ„Åß„Åç„Åæ„Åô„ÅãÔºü",
            "ÁèæÂú®„ÅÆ„Çµ„Éº„Éì„Çπ„Åß‰∏çÊ∫Ä„Å´ÊÄù„ÅÜÁÇπ„Çí3„Å§Êåô„Åí„ÄÅ„Åù„Çå„ÇíÂÖ®„Å¶Ëß£Ê±∫„Åô„ÇãÊñ∞„Çµ„Éº„Éì„Çπ„ÇíËÄÉ„Åà„Å¶„Åè„Å†„Åï„ÅÑ",
            "„Äå„Ç∑„Çß„Ç¢„É™„É≥„Ç∞„Ç®„Ç≥„Éé„Éü„Éº„Äç„ÅÆÊ¶ÇÂøµ„ÇíÊñ∞„Åó„ÅÑÂàÜÈáé„Å´ÂøúÁî®„Åô„Çã„Å®Ôºü",
            "„Éë„É≥„Éá„Éü„ÉÉ„ÇØÂæå„ÅÆ‰∏ñÁïå„ÅßÊñ∞„Åó„ÅèÂøÖË¶Å„Å®„Åï„Çå„Çã„Çµ„Éº„Éì„Çπ„ÅØÔºü",
            "‰∫∫„ÄÖ„Åå„ÄåÊôÇÈñì„Äç„ÇíÁØÄÁ¥Ñ„Åô„Çã„Åü„ÇÅ„Å´ÊîØÊâï„ÅÑ„Åü„ÅÑ„Çµ„Éº„Éì„Çπ„ÅØÔºü",
            "Êó¢Â≠ò„ÅÆË£ΩÂìÅ„ÇÑ„Çµ„Éº„Éì„Çπ„Å´„Äå„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥„Äç„É¢„Éá„É´„ÇíÂ∞éÂÖ•„Åô„Çã„Å®Ôºü",
            "„Éá„Éº„Çø„ÇíÊ¥ªÁî®„Åó„Å¶„ÄÅÊñ∞„Åó„ÅÑ„Éì„Ç∏„Éç„Çπ„ÉÅ„É£„É≥„Çπ„ÇíË¶ã„Å§„Åë„Çã„Å´„ÅØÔºü",
            "B2BÔºà‰ºÅÊ•≠Âêë„ÅëÔºâ„Åß„Åæ„Å†Ëá™ÂãïÂåñ„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÊ•≠Âãô„ÅØÔºü",
            "È´òÈΩ¢ËÄÖÂêë„Åë„ÅÆ„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº„Çµ„Éº„Éì„Çπ„Åß„ÄÅ„Åæ„Å†ÈñãÁô∫„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„ÇÇ„ÅÆ„ÅØÔºü",
            "„Éö„ÉÉ„ÉàÈñ¢ÈÄ£„Åß„ÄÅ„Åæ„Å†Ê∫Ä„Åü„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Éã„Éº„Ç∫„ÅØÔºü",
            "ÂÉç„ÅçÊñπ„ÅÆÂ§öÊßòÂåñ„Å´ÂØæÂøú„Åó„ÅüÊñ∞„Åó„ÅÑ„Çµ„Éº„Éì„Çπ„ÅØÔºü",
            "Âú∞Âüü„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„ÇíÊ¥ªÊÄßÂåñ„Åï„Åõ„Çã„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„ÅØÔºü"
        ];

        // „Ç¢„Ç§„Éá„Ç¢„Çí‰øùÂ≠ò„Åô„ÇãÈÖçÂàó
        let ideas = JSON.parse(localStorage.getItem('businessIdeas')) || [];
        let currentFilter = 'all';
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´ÂÆüË°å
        window.addEventListener('DOMContentLoaded', () => {
            displayIdeas();
            checkLoginStatus();
            updateCounters();
        });

        // „Ç´„Ç¶„É≥„Çø„Éº„ÇíÊõ¥Êñ∞
        function updateCounters() {
            // Á∑è„Ç¢„Ç§„Éá„Ç¢Êï∞
            const totalIdeas = ideas.length;
            animateCounter('totalIdeas', totalIdeas);

            // ÁôªÈå≤„É¶„Éº„Ç∂„ÉºÊï∞
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const totalUsers = users.length;
            animateCounter('totalUsers', totalUsers);

            // ‰ªäÊó•„ÅÆ„Ç¢„Ç§„Éá„Ç¢Êï∞
            const today = new Date().toLocaleDateString('ja-JP');
            const todayIdeas = ideas.filter(idea => idea.date === today).length;
            animateCounter('todayIdeas', todayIdeas);

            // „Ç´„ÉÜ„Ç¥„É™Êï∞
            const categories = new Set(ideas.map(idea => idea.category));
            const totalCategories = categories.size;
            animateCounter('totalCategories', totalCategories);
        }

        // „Ç´„Ç¶„É≥„Çø„Éº„Çí„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥‰ªò„Åç„ÅßÊõ¥Êñ∞
        function animateCounter(elementId, targetValue) {
            const element = document.getElementById(elementId);
            const currentValue = parseInt(element.textContent) || 0;
            const duration = 1000; // 1Áßí
            const steps = 30;
            const increment = (targetValue - currentValue) / steps;
            let current = currentValue;
            let step = 0;

            const timer = setInterval(() => {
                step++;
                current += increment;
                
                if (step >= steps) {
                    element.textContent = targetValue;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current);
                }
            }, duration / steps);
        }

        // „É≠„Ç∞„Ç§„É≥Áä∂ÊÖã„ÇíÁ¢∫Ë™ç
        function checkLoginStatus() {
            if (currentUser) {
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('ideaFormSection').style.display = 'block';
            } else {
                document.getElementById('userInfo').style.display = 'none';
                document.getElementById('authSection').style.display = 'block';
                document.getElementById('ideaFormSection').style.display = 'none';
            }
        }

        // „Éë„Çπ„ÉØ„Éº„ÉâË°®Á§∫/ÈùûË°®Á§∫„ÇíÂàá„ÇäÊõø„Åà
        function togglePassword(inputId, button) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'ÈùûË°®Á§∫';
            } else {
                input.type = 'password';
                button.textContent = 'Ë°®Á§∫';
            }
        }

        // ‰ºöÂì°ÁôªÈå≤„Éï„Ç©„Éº„É†„ÅÆÂá¶ÁêÜ
        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„Çí„ÇØ„É™„Ç¢
            document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
            document.getElementById('registerSuccess').style.display = 'none';

            const nickname = document.getElementById('registerNickname').value.trim();
            const password = document.getElementById('registerPassword').value;

            let hasError = false;

            // „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
            if (nickname.length < 2) {
                document.getElementById('registerNicknameError').textContent = '„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÅØ2ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
                hasError = true;
            }

            if (nickname.length > 20) {
                document.getElementById('registerNicknameError').textContent = '„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÅØ20ÊñáÂ≠ó‰ª•ÂÜÖ„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
                hasError = true;
            }

            if (password.length < 8) {
                document.getElementById('registerPasswordError').textContent = '„Éë„Çπ„ÉØ„Éº„Éâ„ÅØ8ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
                hasError = true;
            }

            if (hasError) return;

            // Êó¢Â≠ò„É¶„Éº„Ç∂„Éº„Çí„ÉÅ„Çß„ÉÉ„ÇØÔºà„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÅßÈáçË§á„ÉÅ„Çß„ÉÉ„ÇØÔºâ
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const existingUser = users.find(u => u.nickname && u.nickname.toLowerCase() === nickname.toLowerCase());

            if (existingUser) {
                document.getElementById('registerNicknameError').textContent = '„Åì„ÅÆ„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÅØÊó¢„Å´‰ΩøÁî®„Åï„Çå„Å¶„ÅÑ„Åæ„Åô';
                return;
            }

            // „É¶„Éº„Ç∂„Éº„ÇíÁôªÈå≤
            const newUser = {
                id: Date.now(),
                nickname: nickname,
                name: nickname, // ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅname„ÇÇË®≠ÂÆö
                password: password, // ÂÆüÈöõ„ÅÆ„Ç¢„Éó„É™„Åß„ÅØ„Éè„ÉÉ„Ç∑„É•Âåñ„ÅåÂøÖË¶Å
                registeredDate: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));

            // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏
            document.getElementById('registerSuccess').textContent = '‰ºöÂì°ÁôªÈå≤„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ„É≠„Ç∞„Ç§„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';
            document.getElementById('registerSuccess').style.display = 'block';
            
            // „Ç´„Ç¶„É≥„Çø„Éº„ÇíÊõ¥Êñ∞
            updateCounters();
            
            // „Éï„Ç©„Éº„É†„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('registerForm').reset();
            
            // „É≠„Ç∞„Ç§„É≥„Éï„Ç©„Éº„É†„Å´„Éã„ÉÉ„ÇØ„Éç„Éº„É†„ÇíËá™ÂãïÂÖ•Âäõ
            document.getElementById('loginNickname').value = nickname;
        });

        // „É≠„Ç∞„Ç§„É≥„Éï„Ç©„Éº„É†„ÅÆÂá¶ÁêÜ
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„Çí„ÇØ„É™„Ç¢
            document.getElementById('loginNicknameError').textContent = '';
            document.getElementById('loginPasswordError').textContent = '';

            const nickname = document.getElementById('loginNickname').value.trim();
            const password = document.getElementById('loginPassword').value;

            // „É¶„Éº„Ç∂„Éº„ÇíÊ§úÁ¥¢Ôºà„Éã„ÉÉ„ÇØ„Éç„Éº„É†„Åæ„Åü„ÅØname„ÅßÊ§úÁ¥¢„ÄÅ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅÔºâ
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => {
                const userNickname = (u.nickname || u.name || '').toLowerCase();
                return userNickname === nickname.toLowerCase() && u.password === password;
            });

            if (!user) {
                document.getElementById('loginPasswordError').textContent = '„Éã„ÉÉ„ÇØ„Éç„Éº„É†„Åæ„Åü„ÅØ„Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì';
                return;
            }

            // „É≠„Ç∞„Ç§„É≥ÊàêÂäü
            currentUser = {
                id: user.id,
                name: user.nickname || user.name,
                nickname: user.nickname || user.name
            };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));

            // „Éï„Ç©„Éº„É†„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('loginForm').reset();

            // UI„ÇíÊõ¥Êñ∞
            checkLoginStatus();
        });

        // „É≠„Ç∞„Ç¢„Ç¶„Éà
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            checkLoginStatus();
            alert('„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„Åü');
        }

        // ChatGPTÈñ¢ÈÄ£„ÅÆÂ§âÊï∞
        let openaiApiKey = localStorage.getItem('openaiApiKey') || '';
        let chatMessages = JSON.parse(localStorage.getItem('chatMessages')) || [];

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´OpenAI API„Ç≠„Éº„ÇíÁ¢∫Ë™ç
        window.addEventListener('DOMContentLoaded', () => {
            if (typeof checkOpenAIApiKey === 'function') {
                checkOpenAIApiKey();
            }
            if (chatMessages.length > 0 && typeof displayChatMessages === 'function') {
                displayChatMessages();
            }
        });

        // OpenAI API„Ç≠„Éº„ÅÆÁ¢∫Ë™ç
        function checkOpenAIApiKey() {
            const configElement = document.getElementById('chatApiConfig');
            if (configElement) {
                if (openaiApiKey) {
                    configElement.style.display = 'none';
                    const keyInput = document.getElementById('openaiApiKey');
                    if (keyInput) keyInput.value = openaiApiKey;
                } else {
                    configElement.style.display = 'block';
                }
            }
        }

        // OpenAI API„Ç≠„Éº„Çí‰øùÂ≠ò
        function saveOpenAIApiKey() {
            const keyInput = document.getElementById('openaiApiKey');
            if (!keyInput) return;
            
            const apiKey = keyInput.value.trim();
            if (apiKey) {
                openaiApiKey = apiKey;
                localStorage.setItem('openaiApiKey', apiKey);
                checkOpenAIApiKey();
            } else {
                alert('API„Ç≠„Éº„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
            }
        }

        // „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
        function displayChatMessages() {
            const container = document.getElementById('chatMessages');
            if (!container) return;
            
            if (chatMessages.length === 0) {
                container.innerHTML = `
                    <div class="chat-empty">
                        <div class="chat-empty-icon">üí¨</div>
                        <p>ChatGPT„Å®ÂØæË©±„Åó„Å¶„ÄÅ„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„Çí„Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞„Åó„Åæ„Åó„Çá„ÅÜÔºÅ</p>
                        <p style="font-size: 0.85rem; margin-top: 8px;">‰æã: „ÄåÊñ∞Ë¶è‰∫ãÊ•≠„ÅÆ„Ç¢„Ç§„Éá„Ç¢„Çí3„Å§Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ„Äç</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = chatMessages.map(msg => {
                const isUser = msg.role === 'user';
                return `
                    <div class="chat-message ${isUser ? 'user' : 'assistant'}">
                        <div class="chat-avatar">${isUser ? 'üë§' : 'ü§ñ'}</div>
                        <div class="chat-content">
                            <div class="chat-bubble">${escapeHtml(msg.content)}</div>
                        </div>
                    </div>
                `;
            }).join('');

            container.scrollTop = container.scrollHeight;
        }

        // HTML„Ç®„Çπ„Ç±„Éº„Éó
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML.replace(/\n/g, '<br>');
        }

        // „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÄÅ‰ø°
        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            if (!input) return;
            
            const message = input.value.trim();
            if (!message) return;
            
            if (!openaiApiKey) {
                alert('API„Ç≠„Éº„ÇíË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                const configElement = document.getElementById('chatApiConfig');
                if (configElement) configElement.style.display = 'block';
                return;
            }

            // ÈÄÅ‰ø°„Éú„Çø„É≥„ÇíÁÑ°ÂäπÂåñ
            const sendBtn = document.getElementById('chatSendBtn');
            if (sendBtn) sendBtn.disabled = true;
            input.disabled = true;

            // „É¶„Éº„Ç∂„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†
            chatMessages.push({ role: 'user', content: message });
            localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
            
            input.value = '';
            displayChatMessages();

            // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
            const container = document.getElementById('chatMessages');
            if (container) {
                const loadingMsg = document.createElement('div');
                loadingMsg.className = 'chat-message assistant';
                loadingMsg.innerHTML = `
                    <div class="chat-avatar">ü§ñ</div>
                    <div class="chat-content">
                        <div class="chat-bubble">
                            <div class="chat-loading">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(loadingMsg);
                container.scrollTop = container.scrollHeight;
            }

            try {
                // OpenAI API„ÇíÂëº„Å≥Âá∫„Åó
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${openaiApiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o-mini',
                        messages: [
                            {
                                role: 'system',
                                content: '„ÅÇ„Å™„Åü„ÅØ„Éì„Ç∏„Éç„Çπ„Ç¢„Ç§„Éá„Ç¢„ÅÆÂ∞ÇÈñÄ„Ç≥„É≥„Çµ„É´„Çø„É≥„Éà„Åß„Åô„ÄÇÊñ∞Ë¶è‰∫ãÊ•≠„ÇÑ„Çπ„Çø„Éº„Éà„Ç¢„ÉÉ„Éó„ÅÆ„Ç¢„Ç§„Éá„Ç¢„ÇíÂâµÈÄ†ÁöÑ„Å´ÊèêÊ°à„Åó„ÄÅ„Éñ„É¨„Ç§„É≥„Çπ„Éà„Éº„Éü„É≥„Ç∞„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÊó•Êú¨Ë™û„ÅßÂõûÁ≠î„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'
                            },
                            ...chatMessages
                        ],
                        temperature: 0.7,
                        max_tokens: 1000
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || 'API„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü');
                }

                const data = await response.json();
                const assistantMessage = data.choices[0].message.content;

                // „Ç¢„Ç∑„Çπ„Çø„É≥„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†
                chatMessages.push({ role: 'assistant', content: assistantMessage });
                localStorage.setItem('chatMessages', JSON.stringify(chatMessages));

                // „É≠„Éº„Éá„Ç£„É≥„Ç∞„ÇíÂâäÈô§„Åó„Å¶„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
                displayChatMessages();

            } catch (error) {
                console.error('ChatGPT API Error:', error);
                
                // „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
                chatMessages.push({ 
                    role: 'assistant', 
                    content: `„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ${error.message}\n\nAPI„Ç≠„Éº„ÅåÊ≠£„Åó„ÅÑ„Åã„ÄÅ„Åæ„Åü„ÅØAPI„ÅÆÂà©Áî®Âà∂Èôê„Å´ÈÅî„Åó„Å¶„ÅÑ„Å™„ÅÑ„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ` 
                });
                localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
                displayChatMessages();
            } finally {
                if (sendBtn) sendBtn.disabled = false;
                input.disabled = false;
                input.focus();
            }
        }

        // Enter„Ç≠„Éº„ÅßÈÄÅ‰ø°ÔºàShift+Enter„ÅßÊîπË°åÔºâ
        function handleChatKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendChatMessage();
            }
        }

        // „ÉÅ„É£„ÉÉ„Éà„Çí„ÇØ„É™„Ç¢
        function clearChat() {
            if (confirm('‰ºöË©±Â±•Ê≠¥„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                chatMessages = [];
                localStorage.removeItem('chatMessages');
                displayChatMessages();
            }
        }

        // „ÉÜ„Ç≠„Çπ„Éà„Ç®„É™„Ç¢„ÅÆËá™Âãï„É™„Çµ„Ç§„Ç∫
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initChatTextarea);
        } else {
            initChatTextarea();
        }

        function initChatTextarea() {
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                chatInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                });
            }
        }

        // „Ç¢„Ç§„Éá„Ç¢„Éï„Ç©„Éº„É†„ÅÆÈÄÅ‰ø°Âá¶ÁêÜ
        document.getElementById('ideaForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            if (!currentUser) {
                alert('„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const idea = {
                id: Date.now(),
                userId: currentUser.id,
                userName: currentUser.name,
                title: document.getElementById('ideaTitle').value,
                category: document.getElementById('ideaCategory').value,
                description: document.getElementById('ideaDescription').value,
                date: new Date().toLocaleDateString('ja-JP'),
                likes: 0,
                likedBy: []
            };

            ideas.unshift(idea);
            localStorage.setItem('businessIdeas', JSON.stringify(ideas));
            
            // „Éï„Ç©„Éº„É†„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('ideaForm').reset();
            
            // „Ç¢„Ç§„Éá„Ç¢„ÇíË°®Á§∫
            displayIdeas();
            
            // „Ç´„Ç¶„É≥„Çø„Éº„ÇíÊõ¥Êñ∞
            updateCounters();
            
            // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏
            alert('„Ç¢„Ç§„Éá„Ç¢„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ');
        });

        // „Ç¢„Ç§„Éá„Ç¢„ÇíË°®Á§∫
        function displayIdeas(filteredIdeas = null) {
            const container = document.getElementById('ideasContainer');
            const ideasToShow = filteredIdeas || ideas;

            if (ideasToShow.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 21c0 .5.4 1 1 1h4c.6 0 1-.5 1-1v-1H9v1zm3-19C8.1 2 5 5.1 5 9c0 2.4 1.2 4.5 3 5.7V17c0 .5.4 1 1 1h6c.6 0 1-.5 1-1v-2.3c1.8-1.3 3-3.4 3-5.7 0-3.9-3.1-7-7-7z"/>
                            </svg>
                        </div>
                        <p>„Åæ„Å†„Ç¢„Ç§„Éá„Ç¢„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ‰∏ä„ÅÆ„Éï„Ç©„Éº„É†„Åã„Çâ„Ç¢„Ç§„Éá„Ç¢„ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                    </div>
                `;
                return;
            }

            // Êó¢Â≠ò„ÅÆ„Ç¢„Ç§„Éá„Ç¢„Å´„ÅÑ„ÅÑ„Å≠„Éï„Ç£„Éº„É´„Éâ„Åå„Å™„ÅÑÂ†¥Âêà„ÅØÂàùÊúüÂåñ
            ideasToShow.forEach(idea => {
                if (idea.likes === undefined) {
                    const likesData = JSON.parse(localStorage.getItem('ideaLikes')) || {};
                    idea.likes = likesData[idea.id] || 0;
                    if (!idea.likedBy) idea.likedBy = [];
                }
            });

            // „ÅÑ„ÅÑ„Å≠„ÅÆÁä∂ÊÖã„ÇíÂèñÂæó
            const likesData = JSON.parse(localStorage.getItem('ideaLikes')) || {};
            const userId = currentUser?.id || 'guest';
            const userLikes = JSON.parse(localStorage.getItem(`userLikes_${userId}`)) || {};

            container.innerHTML = ideasToShow.map(idea => {
                // „ÅÑ„ÅÑ„Å≠Êï∞„ÇíÂèñÂæóÔºàÊó¢Â≠ò„Éá„Éº„Çø„Å®„ÅÆ‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅÔºâ
                const likeCount = idea.likes !== undefined ? idea.likes : (likesData[idea.id] || 0);
                const isLiked = userLikes[idea.id] || false;

                // „Ç≥„É°„É≥„Éà„ÇíÂèñÂæó
                const comments = getCommentsForIdea(idea.id);
                const commentCount = comments.length;

                return `
                <div class="idea-item">
                    <div class="idea-header">
                        <div class="idea-title">${idea.title}</div>
                        <div class="idea-category">${idea.category}</div>
                    </div>
                    <div class="idea-description">${idea.description}</div>
                    <div class="idea-meta">
                        <span>‰ΩúÊàêÊó•: ${idea.date}</span>
                        <div class="idea-actions">
                            <button class="like-btn ${isLiked ? 'liked' : ''}" onclick="toggleLike(${idea.id})" data-idea-id="${idea.id}">
                                <span class="like-icon">${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
                                <span class="like-count" id="likeCount-${idea.id}">${likeCount}</span>
                            </button>
                            <button class="comment-btn" onclick="toggleComments(${idea.id})" data-idea-id="${idea.id}">
                                <span>üí¨</span>
                                <span id="commentCount-${idea.id}">${commentCount}</span>
                            </button>
                            ${currentUser && idea.userId === currentUser.id ? 
                                `<button class="delete-btn" onclick="deleteIdea(${idea.id})">ÂâäÈô§</button>` : 
                                ''
                            }
                        </div>
                    </div>
                    <div class="comment-section" id="commentSection-${idea.id}" style="display: none;">
                        <div class="comment-toggle active" onclick="toggleComments(${idea.id})">
                            <span class="comment-toggle-icon">‚ñ∂</span>
                            <span>„Ç≥„É°„É≥„Éà (${commentCount})</span>
                        </div>
                        <div id="commentContent-${idea.id}">
                            ${currentUser ? `
                                <div class="comment-form" id="commentForm-${idea.id}">
                                    <textarea placeholder="„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ... (Shift+Enter„ÅßÊîπË°å)" id="commentText-${idea.id}" onkeydown="handleCommentKeyDown(event, ${idea.id})"></textarea>
                                    <div class="comment-form-actions">
                                        <button class="comment-cancel-btn" onclick="cancelComment(${idea.id})">„Ç≠„É£„É≥„Çª„É´</button>
                                        <button class="comment-submit-btn" onclick="submitComment(${idea.id})">ÊäïÁ®ø</button>
                                    </div>
                                </div>
                            ` : `
                                <p style="text-align: center; color: #94a3b8; padding: 16px; font-size: 0.9rem;">„Ç≥„É°„É≥„Éà„Åô„Çã„Å´„ÅØ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô</p>
                            `}
                            <div class="comments-list" id="commentsList-${idea.id}">
                                ${renderComments(comments)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            }).join('');
        }

        // „ÅÑ„ÅÑ„Å≠„ÇíÂàá„ÇäÊõø„Åà
        function toggleLike(ideaId) {
            if (!currentUser) {
                alert('„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }

            const userId = currentUser.id || 'guest';
            const userLikes = JSON.parse(localStorage.getItem(`userLikes_${userId}`)) || {};
            const likesData = JSON.parse(localStorage.getItem('ideaLikes')) || {};
            
            const isLiked = userLikes[ideaId] || false;
            
            // „ÅÑ„ÅÑ„Å≠„ÅÆÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            if (isLiked) {
                // „ÅÑ„ÅÑ„Å≠„ÇíËß£Èô§
                userLikes[ideaId] = false;
                likesData[ideaId] = (likesData[ideaId] || 0) - 1;
                if (likesData[ideaId] < 0) likesData[ideaId] = 0;
            } else {
                // „ÅÑ„ÅÑ„Å≠„ÇíËøΩÂä†
                userLikes[ideaId] = true;
                likesData[ideaId] = (likesData[ideaId] || 0) + 1;
            }

            // „Éá„Éº„Çø„Çí‰øùÂ≠ò
            localStorage.setItem(`userLikes_${userId}`, JSON.stringify(userLikes));
            localStorage.setItem('ideaLikes', JSON.stringify(likesData));

            // „Ç¢„Ç§„Éá„Ç¢„Éá„Éº„Çø„ÇÇÊõ¥Êñ∞Ôºà‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅÔºâ
            const idea = ideas.find(i => i.id === ideaId);
            if (idea) {
                idea.likes = likesData[ideaId];
                if (!idea.likedBy) idea.likedBy = [];
                if (isLiked) {
                    idea.likedBy = idea.likedBy.filter(id => id !== userId);
                } else {
                    if (!idea.likedBy.includes(userId)) {
                        idea.likedBy.push(userId);
                    }
                }
                localStorage.setItem('businessIdeas', JSON.stringify(ideas));
            }

            // UI„ÇíÊõ¥Êñ∞
            const likeBtn = document.querySelector(`[data-idea-id="${ideaId}"]`);
            const likeCount = document.getElementById(`likeCount-${ideaId}`);
            
            if (likeBtn && likeCount) {
                if (isLiked) {
                    likeBtn.classList.remove('liked');
                    likeBtn.querySelector('.like-icon').textContent = 'ü§ç';
                } else {
                    likeBtn.classList.add('liked');
                    likeBtn.querySelector('.like-icon').textContent = '‚ù§Ô∏è';
                }
                likeCount.textContent = likesData[ideaId];
            }

            // „Ç´„Ç¶„É≥„Çø„Éº„ÇíÊõ¥Êñ∞
            updateCounters();
        }

        // „Ç≥„É°„É≥„ÉàÈñ¢ÈÄ£„ÅÆÈñ¢Êï∞
        function getCommentsForIdea(ideaId) {
            const allComments = JSON.parse(localStorage.getItem('ideaComments')) || {};
            return allComments[ideaId] || [];
        }

        function saveCommentsForIdea(ideaId, comments) {
            const allComments = JSON.parse(localStorage.getItem('ideaComments')) || {};
            allComments[ideaId] = comments;
            localStorage.setItem('ideaComments', JSON.stringify(allComments));
        }

        function renderComments(comments) {
            if (comments.length === 0) {
                return '<div class="comment-empty">„Åæ„Å†„Ç≥„É°„É≥„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>';
            }

            return comments.map(comment => `
                <div class="comment-item">
                    <div class="comment-header">
                        <span class="comment-author">${escapeHtml(comment.author)}</span>
                        <span class="comment-date">${comment.date}</span>
                    </div>
                    <div class="comment-content">${escapeHtml(comment.content)}</div>
                </div>
            `).join('');
        }

        function toggleComments(ideaId) {
            if (!currentUser) {
                alert('„Ç≥„É°„É≥„Éà„Åô„Çã„Å´„ÅØ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }

            const section = document.getElementById(`commentSection-${ideaId}`);
            if (!section) return;

            const isVisible = section.style.display !== 'none';
            section.style.display = isVisible ? 'none' : 'block';
            
            const toggle = section.querySelector('.comment-toggle');
            if (toggle) {
                if (isVisible) {
                    toggle.classList.remove('active');
                } else {
                    toggle.classList.add('active');
                }
            }
        }

        function submitComment(ideaId) {
            if (!currentUser) {
                alert('„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }

            const textarea = document.getElementById(`commentText-${ideaId}`);
            if (!textarea) return;

            const content = textarea.value.trim();
            if (!content) {
                alert('„Ç≥„É°„É≥„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }

            const comments = getCommentsForIdea(ideaId);
            const newComment = {
                id: Date.now(),
                author: currentUser.name,
                userId: currentUser.id,
                content: content,
                date: new Date().toLocaleString('ja-JP')
            };

            comments.push(newComment);
            saveCommentsForIdea(ideaId, comments);

            // UI„ÇíÊõ¥Êñ∞
            const commentsList = document.getElementById(`commentsList-${ideaId}`);
            const commentCount = document.getElementById(`commentCount-${ideaId}`);
            const toggle = document.querySelector(`#commentSection-${ideaId} .comment-toggle span:last-child`);

            if (commentsList) {
                commentsList.innerHTML = renderComments(comments);
            }
            if (commentCount) {
                commentCount.textContent = comments.length;
            }
            if (toggle) {
                toggle.textContent = `„Ç≥„É°„É≥„Éà (${comments.length})`;
            }

            // „Éï„Ç©„Éº„É†„Çí„É™„Çª„ÉÉ„Éà
            textarea.value = '';
        }

        function cancelComment(ideaId) {
            const textarea = document.getElementById(`commentText-${ideaId}`);
            if (textarea) {
                textarea.value = '';
            }
        }

        function handleCommentKeyDown(event, ideaId) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                submitComment(ideaId);
            }
        }

        // „Ç¢„Ç§„Éá„Ç¢„ÇíÂâäÈô§
        function deleteIdea(id) {
            if (confirm('„Åì„ÅÆ„Ç¢„Ç§„Éá„Ç¢„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                ideas = ideas.filter(idea => idea.id !== id);
                localStorage.setItem('businessIdeas', JSON.stringify(ideas));
                
                // „ÅÑ„ÅÑ„Å≠„Éá„Éº„Çø„ÇÇÂâäÈô§
                const likesData = JSON.parse(localStorage.getItem('ideaLikes')) || {};
                delete likesData[id];
                localStorage.setItem('ideaLikes', JSON.stringify(likesData));

                // „Ç≥„É°„É≥„Éà„ÇÇÂâäÈô§
                const allComments = JSON.parse(localStorage.getItem('ideaComments')) || {};
                delete allComments[id];
                localStorage.setItem('ideaComments', JSON.stringify(allComments));
                
                displayIdeas();
                updateCounters();
            }
        }

        // „Ç´„ÉÜ„Ç¥„É™„Åß„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
        function filterIdeas(category) {
            currentFilter = category;
            
            // „Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });

            if (category === 'all') {
                displayIdeas();
            } else {
                const filtered = ideas.filter(idea => idea.category === category);
                displayIdeas(filtered);
            }
        }

        // „É≠„Ç∞„Ç§„É≥Ê∏à„Åø„É¶„Éº„Ç∂„Éº„ÅÆ„Ç¢„Ç§„Éá„Ç¢„ÅÆ„ÅøË°®Á§∫„Åô„ÇãÂ†¥Âêà„ÅÆ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
        function filterMyIdeas() {
            if (!currentUser) return;
            const myIdeas = ideas.filter(idea => idea.userId === currentUser.id);
            displayIdeas(myIdeas);
        }



        // „É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè
        function openModal(type) {
            const modalId = type === 'privacy' ? 'privacyModal' : 'companyModal';
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        // „É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeModal(type) {
            const modalId = type === 'privacy' ? 'privacyModal' : 'companyModal';
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // „É¢„Éº„ÉÄ„É´Â§ñ„Çí„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // ESC„Ç≠„Éº„Åß„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    if (modal.style.display === 'block') {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            }
        });
    </script>
</body>
</html>